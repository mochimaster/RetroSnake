!function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);var i=class{constructor(t){this.board=t,this.generateFood(),this.drawFood(),this.body=this.board.snake.body}generateFood(){this.x=Math.floor(Math.random()*(this.board.INNERRIGHT-this.board.INNERLEFT+3)+this.board.INNERLEFT+3),this.y=Math.floor(Math.random()*(this.board.INNERBOTTOM-this.board.INNERTOP+3)+this.board.INNERTOP+3);for(let t=0;t<this.board.snake.body.length;t++)this.board.snake.body[t][0]===this.x&&this.board.snake.body[t][1]===this.y&&this.generateFood()}drawFood(){let t=document.getElementById("canvas").getContext("2d");t.rect(this.x,this.y,2,2),t.strokeStyle="rgb(15, 22, 20)",t.stroke()}};var o=class{constructor(t){this.board=t,this.x=Math.floor(t.WIDTH/2),this.y=Math.floor(t.HEIGHT/2),this.moveSpeed=5,this.xspeed=5,this.yspeed=0,this.dead=!1,this.body=[[this.x,this.y]],this.score=0,this.turning=!1}head(){return[this.body[0][0],this.body[0][1]]}updateLocation(){this.body.unshift([this.body[0][0]+this.xspeed,this.body[0][1]+this.yspeed]),this.eatFood()?this.body.unshift([this.body[0][0]+this.xspeed,this.body[0][1]+this.yspeed]):this.body.pop(),this.turning=!1}drawSnake(){let t=document.getElementById("canvas").getContext("2d");t.fillStyle="rgb(15, 22, 20)";for(let e=0;e<this.body.length;e++)t.fillRect(this.body[e][0],this.body[e][1],7,7)}drawScore(){let t=document.getElementById("canvas").getContext("2d");t.fillStyle=this.board.OBJECTCOLOR,t.font="17px trsMillion",t.fillText(this.score,10,20)}eatFood(){return Math.abs(this.body[0][0]-this.board.food.x)<=5&&Math.abs(this.body[0][1]-this.board.food.y)<=5&&(this.board.food.generateFood(),this.score+=10,!0)}checkDeath(){return!0===this.hitBorder()||!0===this.hitSelf()?(this.dead=!0,!0):(this.dead=!1,!1)}hitBorder(){return this.head()[0]>this.board.WIDTH-2*this.board.BORDER||this.head()[0]<this.board.BORDER||this.head()[1]>this.board.HEIGHT-2*this.board.BORDER||this.head()[1]<this.board.BORDER+this.board.TOPSCOREHEIGHT}hitSelf(){for(let t=1;t<this.body.length;t++)if(this.body[0][0]===this.body[t][0]&&this.body[0][1]===this.body[t][1])return!0;return!1}move(){this.drawSnake(),this.drawScore(),this.checkDeath(),this.dead||(this.updateLocation(),this.eatFood())}cheat(){this.score+=10,this.body.unshift([this.body[0][0]+this.xspeed,this.body[0][1]+this.yspeed])}};window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var h=class{constructor(){this.OBJECTCOLOR="rgb(30,27,28)",this.WIDTH=320,this.HEIGHT=240,this.BORDER=10,this.TOPSCOREHEIGHT=25,this.INNERRIGHT=this.WIDTH-2*this.BORDER,this.INNERLEFT=this.BORDER,this.INNERBOTTOM=this.HEIGHT-2*this.BORDER,this.INNERTOP=this.BORDER+this.TOPSCOREHEIGHT,this.STARTED=!1,this.PAUSED=!1,this.drawBoard(),this.snake=new o(this),this.food=new i(this),this.draw(),this.sessionHighScore=0,this.stop=!1,this.frameCount=0,this.fps,this.fpsInterval,this.startTime,this.now,this.then,this.elapsed}draw(){window.requestAnimFrame(this.draw.bind(this)),this.now=Date.now(),this.elapsed=this.now-this.then,this.elapsed>this.fpsInterval&&(this.then=this.now-this.elapsed%this.fpsInterval,this.drawBoard(),this.drawHighScore(),!0===this.STARTED&&!1===this.PAUSED&&!1===this.over()?(this.food.drawFood(),this.snake.move()):!0===this.STARTED&&!0===this.PAUSED&&!1===this.over()?this.drawPause():this.snake.checkDeath()?(this.drawHighScore(),this.drawGameOver(),this.recordSessionHighScore()):this.drawMenu())}restart(){this.food.generateFood(),this.snake.xspeed=this.snake.moveSpeed,this.snake.yspeed=0,this.snake.body=[[this.WIDTH/2,this.HEIGHT/2]],this.snake.score>this.sessionHighScore&&(this.sessionHighScore=this.snake.score),this.snake.score=0}addSnake(){return new o}drawBoard(){let t=document.getElementById("canvas").getContext("2d");t.fillStyle="rgb(97, 159, 116)",t.fillRect(0,0,this.WIDTH,this.HEIGHT),t.beginPath(),t.moveTo(this.BORDER,this.TOPSCOREHEIGHT),t.lineTo(this.WIDTH-this.BORDER,this.TOPSCOREHEIGHT),t.closePath(),t.fill(),t.strokeStyle=this.OBJECTCOLOR,t.lineWidth=4,t.stroke(),t.strokeRect(this.BORDER,this.TOPSCOREHEIGHT+10,this.WIDTH-2*this.BORDER,this.HEIGHT-2*this.BORDER-this.TOPSCOREHEIGHT)}drawMenu(){let t=canvas.getContext("2d");t.fillStyle=this.OBJECTCOLOR,t.font="23px trsMillion",t.fillText("Welcome to RetroSnake",25,70),t.font="15px trsMillion",t.fillText("- Press enter key to start new game",15,130),t.fillText("- Use arrow keys to control snake",15,150),t.fillText("- Press esc key to pause game",15,170)}drawGameOver(){let t=document.getElementById("canvas").getContext("2d");t.fillStyle=this.OBJECTCOLOR,t.font="23px trsMillion ",t.fillText("GAME OVER",this.WIDTH/2-60,this.HEIGHT/2-40),t.font="15px trsMillion ",t.fillText("Your score : "+this.snake.score,this.WIDTH/2-60,this.HEIGHT/2+30),t.font="15px trsMillion ",t.fillText("Press enter for a new game",60,this.HEIGHT/2+50)}drawHighScore(){let t=canvas.getContext("2d");t.fillStyle=this.OBJECTCOLOR,t.font="17px trsMillion ",t.fillText("HIGH SCORE : "+this.sessionHighScore,this.WIDTH/2+15,this.TOPSCOREHEIGHT-5)}recordSessionHighScore(){if(this.snake.score>this.sessionHighScore){let t=document.getElementById("canvas").getContext("2d");t.fillStyle=this.OBJECTCOLOR,t.font="15px trsMillion ",t.fillText("CONGRATULATIONS! NEW HIGH SCORE",45,this.HEIGHT/2+10)}}drawPause(){let t=canvas.getContext("2d");t.fillStyle=this.OBJECTCOLOR,t.font="23px trsMillion",t.fillText("PAUSED",115,70),t.font="15 trsMillion",t.fillText("Press esc to continue",37,170)}over(){return!!this.snake.checkDeath()}start(){for(;!this.over();)this.snake.move();window.alert("Game over.")}startAnimating(t){this.fpsInterval=1e3/t,this.then=Date.now(),this.startTime=this.then,this.draw()}handleKeyPress(t){if(t)if(37===t.keyCode&&this.snake.xspeed<=0&&!1===this.snake.turning)this.snake.xspeed=-5,this.snake.yspeed=0,this.snake.turning=!0;else if(38===t.keyCode&&this.snake.yspeed<=0&&!1===this.snake.turning)this.snake.xspeed=0,this.snake.yspeed=-5,this.snake.turning=!0;else if(39===t.keyCode&&this.snake.xspeed>=0&&!1===this.snake.turning)this.snake.xspeed=5,this.snake.yspeed=0,this.snake.turning=!0;else if(40===t.keyCode&&this.snake.yspeed>=0&&!1===this.snake.turning)this.snake.xspeed=0,this.snake.yspeed=5,this.snake.turning=!0;else if(27===t.keyCode)this.PAUSED=!this.PAUSED;else if(13===t.keyCode){if(!0===this.PAUSED)return nil;this.STARTED=!0,this.PAUSED=!1,!0===this.over()&&this.restart()}else 67===t.keyCode&&this.snake.cheat()}};document.addEventListener("DOMContentLoaded",()=>{document.getElementById("canvas");const t=new h;document.addEventListener("keydown",t.handleKeyPress.bind(t)),t.startAnimating(15)})}]);
//# sourceMappingURL=bundle.js.map